{% extends 'core/base.html' %}

{% block content %}
<div class="funky-app-container">

    <div class="funky-header-page">
        <div>
            <h2>Pending Work</h2>
            <p>Manage and upload your assignments here.</p>
        </div>
        <div class="funky-emoji">ğŸ“</div>
    </div>

    <div>
        {% if assignments %}
        {% for assignment in assignments %}
        <div class="funky-assignment-row {% cycle 'bg-yellow' 'bg-coral' 'bg-lime' %}">

            <div class="funky-record-info">
                <div class="funky-record-icon">
                    ğŸ“Œ
                </div>
                <div>
                    <h3>{{ assignment.title }}</h3>
                    <p>
                        {{ assignment.subject.name }} &nbsp;â€¢&nbsp;
                        <span class="due-date">Due: {{ assignment.due_date|date:"M d, Y" }}</span>
                    </p>
                </div>
            </div>

            <div>
                {% if assignment.id in submitted_ids %}
                <div
                    style="background: #dcfce7; color: #166534; padding: 14px 28px; border-radius: 25px; font-weight: 800; font-size: 1rem; display: inline-block; box-shadow: 0 4px 10px rgba(22, 101, 52, 0.1);">
                    âœ… Submitted
                </div>
                {% else %}
                <form action="{% url 'submit_work' assignment.id %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <label
                        style="background: #3b82f6; color: white; padding: 14px 28px; border-radius: 25px; font-weight: 800; font-size: 1rem; cursor: pointer; box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3); transition: background 0.2s; display: inline-block;">
                        Upload Work
                        <input type="file" name="pdf_file" accept=".pdf" style="display: none;"
                            onchange="this.form.submit()">
                    </label>
                </form>
                {% endif %}
            </div>

        </div>
        {% endfor %}
        {% else %}
        <div class="funky-empty-state">
            <span>ğŸ‰</span>
            <h3>All caught up!</h3>
            <p>You have no pending assignments right now.</p>
        </div>
        {% endif %}
    </div>

</div>
{% endblock %}